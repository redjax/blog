[{"content":"If you have ever accidentally committed code under the wrong git.user/git.email, you should know you can rewrite the git log to change commit authors using git filter-branch.\nGit filter-repo plugin Install the git-filter-repo plugin for Git with Python:\n1 pip install git-filter-repo This plugin is required to run the git filter-repo command. It is ok to install this using \u0026ldquo;system Python.\u0026rdquo;\nIf you are running Linux, you can install it with apt install -y git-filter-repo (or whatever package manager your distribution uses, i.e. dnf for RedHat/Fedora).\nSteps Clone the repository that has the history you want to rewrite using the --bare flag:\n1 git clone --bare git@github.com:user/repo.git Run the following command to replace all instances of the old/wrong name \u0026amp; email with a different Git user:\n1 2 3 4 5 6 7 8 git filter-branch --env-filter \u0026#39; if [ \u0026#34;$GIT_COMMITTER_NAME\u0026#34; = \u0026#34;Old Name\u0026#34; ] \u0026amp;\u0026amp; [ \u0026#34;$GIT_COMMITTER_EMAIL\u0026#34; = \u0026#34;old.email@example.com\u0026#34; ]; then GIT_COMMITTER_NAME=\u0026#34;New Name\u0026#34; GIT_COMMITTER_EMAIL=\u0026#34;new.email@example.com\u0026#34; GIT_AUTHOR_NAME=\u0026#34;New Name\u0026#34; GIT_AUTHOR_EMAIL=\u0026#34;new.email@example.com\u0026#34; fi \u0026#39; --tag-name-filter cat -- --branches --tags Info\nReplace Old Name with the old git config user.name, old.email@example.com with the old git config user.email, and do the same for New Name and new.email@example.com.\nClean the reflog and run Git garbage collection to remove any cached history with the old Git user:\n1 2 git reflog expire --expire=now --all git gc --prune=now Finally, force push the changes back to the remote:\n1 2 git push --force --all git push --force --tags Tip\nIf you have branch protection rules that prevent force pushing, you will need to turn them off temporarily to run the force push.\nVerify the rewrite succeeded by cloning the repository to a new path and search the log for the old user:\n1 2 3 4 mkdir ~/tmp git clone git@github.com:user/repo.git ~/tmp/repo cd ~/tmp/repo git log --author=\u0026#34;Old Name\u0026#34; You should not see any results; if you do, look back through the history of your commands to see if there were any errors during the process.\nBash script On a Linux or Mac system, you can use this Bash script to automate the steps above. Run the script with --help to see the usage menu.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 #!/usr/bin/env bash set -euo pipefail ## Find a Python interpreter for pip installs PYTHON_BIN=\u0026#34;\u0026#34; for bin in python3 python py py3 python; do if command -v \u0026#34;$bin\u0026#34; \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then PYTHON_BIN=$bin break fi done ## Ensure git-filter-repo is installed (try uv first, then pip) if ! command -v git-filter-repo \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then echo \u0026#34;git-filter-repo not found.\u0026#34; ## Install with uv, if available if command -v uv \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then echo \u0026#34;uv found. Installing git-filter-repo as a tool...\u0026#34; uv tool install git-filter-repo export PATH=\u0026#34;$HOME/.local/bin:$PATH\u0026#34; fi if [[ -z \u0026#34;$PYTHON_BIN\u0026#34; ]]; then echo \u0026#34;No Python interpreter found. Please install Python or uv.\u0026#34; exit 1 fi ## Fallback to Python echo \u0026#34;Using $PYTHON_BIN to install git-filter-repo via pip...\u0026#34; \u0026#34;$PYTHON_BIN\u0026#34; -m pip install --user git-filter-repo export PATH=\u0026#34;$HOME/.local/bin:$PATH\u0026#34; fi ## Test git-filter-repo was installed correctly if ! command -v git-filter-repo \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then echo \u0026#34;git-filter-repo still not found after installation attempts.\u0026#34; exit 1 fi ## Function to print help menu/usage usage() { echo \u0026#34;\u0026#34; echo \u0026#34;Usage: $0 [--force] \\\\\u0026#34; echo \u0026#34; --repo-url git@github.com:user/repo.git \\\\\u0026#34; echo \u0026#34; --source-email \u0026#39;old.email@example.com\u0026#39; \\\\\u0026#34; echo \u0026#34; --target-email \u0026#39;new.email@example.com\u0026#39; \\\\\u0026#34; echo \u0026#34; [--source-name \u0026#39;Old Name\u0026#39;] \\\\\u0026#34; echo \u0026#34; [--target-name \u0026#39;New Name\u0026#39;]\u0026#34; echo \u0026#34;\u0026#34; exit 1 } ## Default vars REPO_URL=\u0026#34;\u0026#34; SRC_EMAIL=\u0026#34;\u0026#34; TGT_EMAIL=\u0026#34;\u0026#34; SRC_NAME=\u0026#34;\u0026#34; TGT_NAME=\u0026#34;\u0026#34; FORCE_PUSH=\u0026#34;\u0026#34; ## Parse arguments while [[ $# -gt 0 ]]; do case $1 in --repo-url) REPO_URL=\u0026#34;$2\u0026#34; shift 2 ;; --source-email) SRC_EMAIL=\u0026#34;$2\u0026#34; shift 2 ;; --target-email) TGT_EMAIL=\u0026#34;$2\u0026#34; shift 2 ;; --source-name) SRC_NAME=\u0026#34;$2\u0026#34; shift 2 ;; --target-name) TGT_NAME=\u0026#34;$2\u0026#34; shift 2 ;; --force) FORCE_PUSH=1 shift ;; -h | --help) usage ;; *) echo \u0026#34;Invalid argument: $1\u0026#34; usage ;; esac done if [[ -z \u0026#34;$REPO_URL\u0026#34; || -z \u0026#34;$SRC_EMAIL\u0026#34; || -z \u0026#34;$TGT_EMAIL\u0026#34; ]]; then echo \u0026#34;Missing required arguments.\u0026#34; usage fi echo \u0026#34;Repo URL: $REPO_URL\u0026#34; echo \u0026#34;Replacing source email \u0026lt;$SRC_EMAIL\u0026gt; with target email \u0026lt;$TGT_EMAIL\u0026gt;\u0026#34; if [[ -n \u0026#34;$SRC_NAME\u0026#34; ]]; then echo \u0026#34;Source name: $SRC_NAME\u0026#34; fi if [[ -n \u0026#34;$TGT_NAME\u0026#34; ]]; then echo \u0026#34;Target name: $TGT_NAME\u0026#34; fi ## Create temporary directory to clone repo into TMP_DIR=$(mktemp -d) echo \u0026#34;Mirror cloning repository into temporary directory: $TMP_DIR\u0026#34; git clone --mirror \u0026#34;$REPO_URL\u0026#34; \u0026#34;$TMP_DIR/repo\u0026#34; cd \u0026#34;$TMP_DIR/repo\u0026#34; echo \u0026#34;Rewriting commit history emails with git-filter-repo...\u0026#34; ## Read history with source username/email, replace with target COMMIT_CALLBACK=\u0026#34; if commit.author_email.decode(\u0026#39;utf-8\u0026#39;) == \u0026#39;$SRC_EMAIL\u0026#39;: commit.author_email = b\u0026#39;$TGT_EMAIL\u0026#39; \u0026#34; if [[ -n \u0026#34;$TGT_NAME\u0026#34; ]]; then COMMIT_CALLBACK+=\u0026#34; commit.author_name = b\u0026#39;$TGT_NAME\u0026#39; \u0026#34; fi COMMIT_CALLBACK+=\u0026#34; if commit.committer_email.decode(\u0026#39;utf-8\u0026#39;) == \u0026#39;$SRC_EMAIL\u0026#39;: commit.committer_email = b\u0026#39;$TGT_EMAIL\u0026#39; \u0026#34; if [[ -n \u0026#34;$TGT_NAME\u0026#34; ]]; then COMMIT_CALLBACK+=\u0026#34; commit.committer_name = b\u0026#39;$TGT_NAME\u0026#39; \u0026#34; fi echo \u0026#34;Generated callback:\u0026#34; echo \u0026#34;$COMMIT_CALLBACK\u0026#34; ## Rewrite history git filter-repo --force --commit-callback \u0026#34;$COMMIT_CALLBACK\u0026#34; echo \u0026#34;git filter-repo completed successfully\u0026#34; echo \u0026#34;Verifying first few commits after rewrite...\u0026#34; git log --all --pretty=format:\u0026#34;%h %ad %an \u0026lt;%ae\u0026gt;\u0026#34; --date=iso -5 echo \u0026#34;Removing backup refs...\u0026#34; ## Remove all refs with old data git for-each-ref --format=\u0026#39;%(refname)\u0026#39; refs/original | xargs -r git update-ref -d git for-each-ref --format=\u0026#39;%(refname)\u0026#39; refs/backup | xargs -r git update-ref -d echo \u0026#34;Expiring reflogs and pruning unreachable objects...\u0026#34; ## Expire old data locally before pushing git reflog expire --expire=now --all git gc --prune=now --aggressive echo \u0026#34;Verifying no lingering commits with source email anywhere...\u0026#34; ## Get list of commits with source email SOURCE_COMMITS=$(git for-each-ref --format=\u0026#39;%(refname)\u0026#39; | while read -r ref; do git log \u0026#34;$ref\u0026#34; --pretty=format:\u0026#34;%H%x09%ad%x09%an%x09%ae%x09%cN%x09%cE\u0026#34; --date=iso | awk -v src_email=\u0026#34;$SRC_EMAIL\u0026#34; \u0026#39; $4 == src_email || $6 == src_email { print FILENAME \u0026#34;\\t\u0026#34; $0 }\u0026#39; FILENAME=\u0026#34;$ref\u0026#34; done) ## If any commits remain with source email, exit if [[ -n \u0026#34;$SOURCE_COMMITS\u0026#34; ]]; then echo \u0026#34;\u0026#34; echo \u0026#34;[ERROR] Some commits still contain the source email \u0026lt;$SRC_EMAIL\u0026gt;:\u0026#34; echo \u0026#34;\u0026#34; echo -e \u0026#34;Ref\\tCommit\\tDate\\tAuthorName\\tAuthorEmail\\tCommitterName\\tCommitterEmail\u0026#34; echo \u0026#34;$SOURCE_COMMITS\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;Aborting push.\u0026#34; exit 2 fi echo \u0026#34;Removing local refs under refs/merge-requests/ to avoid push errors...\u0026#34; ## Remove all refs under refs/merge-requests/ git for-each-ref --format=\u0026#39;%(refname)\u0026#39; refs/merge-requests | xargs -r -n 1 git update-ref -d || true echo \u0026#34;Adding remote origin after filter-repo cleanup...\u0026#34; ## Re-add origin (git-filter-repo removes it) git remote add origin \u0026#34;$REPO_URL\u0026#34; echo \u0026#34;Pushing all branches and tags to origin forcibly...\u0026#34; ## Push rewritten histories back up if [[ -n \u0026#34;${FORCE_PUSH:-}\u0026#34; ]]; then if ! git push origin --force --all; then echo \u0026#34;\u0026#34; echo \u0026#34;[ERROR] Failed to push rewritten commits to origin.\u0026#34; exit 1 fi if ! git push origin --force --tags; then echo \u0026#34;\u0026#34; echo \u0026#34;[ERROR] Failed to push rewritten commits to origin.\u0026#34; exit 1 fi else if ! git push origin --force --all; then echo \u0026#34;\u0026#34; echo \u0026#34;[ERROR] Failed to push rewritten commits to origin.\u0026#34; exit 1 fi if ! git push origin --force --tags; then echo \u0026#34;\u0026#34; echo \u0026#34;[ERROR] Failed to push rewritten commits to origin.\u0026#34; exit 1 fi fi echo \u0026#34;Successfully rewrote all commits and pushed to remote.\u0026#34; echo \u0026#34;Temporary repo location: $TMP_DIR/repo\u0026#34; exit 0 ","permalink":"https://techobyte.cc/notes/git-rewrite-history/","summary":"\u003cp\u003eIf you have ever accidentally committed code under the wrong \u003ccode\u003egit.user\u003c/code\u003e/\u003ccode\u003egit.email\u003c/code\u003e, you should know you can rewrite the \u003ccode\u003egit log\u003c/code\u003e to change commit authors using \u003ccode\u003egit filter-branch\u003c/code\u003e.\u003c/p\u003e\n\u003ch2 id=\"git-filter-repo-plugin\"\u003eGit filter-repo plugin\u003c/h2\u003e\n\u003cp\u003eInstall the \u003ca href=\"https://github.com/newren/git-filter-repo/blob/main/INSTALL.md\"\u003e\u003ccode\u003egit-filter-repo\u003c/code\u003e\u003c/a\u003e plugin for Git with Python:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003epip install git-filter-repo\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eThis plugin is required to run the \u003ccode\u003egit filter-repo\u003c/code\u003e command. It is ok to install this using \u0026ldquo;system Python.\u0026rdquo;\u003c/p\u003e\n\u003cp\u003eIf you are running Linux, you can install it with \u003ccode\u003eapt install -y git-filter-repo\u003c/code\u003e (or whatever package manager your distribution uses, i.e. \u003ccode\u003ednf\u003c/code\u003e for RedHat/Fedora).\u003c/p\u003e","title":"Git Rewrite History"},{"content":"Hugo is a static site generator that enables you to write your website\u0026rsquo;s content as Markdown files, and render them to nice-looking websites using Hugo themes. The word \u0026ldquo;static\u0026rdquo; in this context means that the files Hugo renders are meant to be served as-is, there is no \u0026ldquo;backend\u0026rdquo; for the site (unless you add custom Javascript code).\nStatic sites are perfect for many different kinds of websites, from personal blogs like this site to product sites (i.e. Brave browser\u0026rsquo;s website) to an organization\u0026rsquo;s home page (i.e. the LetsEncrypt project\u0026rsquo;s site) to documentation sites (i.e. DigitalOcean\u0026rsquo;s documentation). With a static site generator, you do not have to deal with web code like HTML or Javascript, but you still have the option of creating your own custom themes if that appeals to you.\nWhen Hugo renders your source code into a website, it outputs everything you need to start serving the site to a public/ directory, allowing you to host the page in Docker, or on a VPS you control, or with a service like Netlify. You could even host your site on a Raspberry Pi you own (although I would recommend looking into running the site in a Docker container, instead of a Canonical Snap). Anywhere that can serve HTML should be able to serve your compiled Hugo website.\nThis blog will run through the basic steps to initialize a Hugo project, host it on Github, and setup hosting with Netlify.\nRequirements Hugo You should also pick a Hugo theme, i.e. PaperMod Go (optional) You can add themes as a Hugo module instead of using Git submodules. Git Github account Netlify account Initialize Hugo repository There are different ways of structuring the repository, like putting the site\u0026rsquo;s content in a src/ directory or storing multiple Hugo sites in a single monorepo. This guide assumes you follow the default steps for initializing a Hugo project, where all source code is in the \u0026ldquo;root\u0026rdquo; of the repository.\nFirst, cd to a path where you want to initialize your Hugo site, i.e. ~/git or just ~/ and initialize the site with:\n1 hugo new site \u0026lt;your-blog-name\u0026gt; Replace \u0026lt;your-blog-name\u0026gt; above with the name of your blog. The documentation uses quickstart as an example. You can name the site whatever you want, and can change it later by editing the hugo.toml/hugo.yml file the hugo new site command creates. When you run the Hugo command, you will see output with some first steps and instructions for editing the hugo.toml to change the site\u0026rsquo;s configuration:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 $\u0026gt; hugo new site your-site-name Congratulations! Your new Hugo site was created in /home/username/git/your-site-name. Just a few more steps... 1. Change the current directory to /home/username/git/your-site-name. 2. Create or install a theme: - Create a new theme with the command \u0026#34;hugo new theme \u0026lt;THEMENAME\u0026gt;\u0026#34; - Or, install a theme from https://themes.gohugo.io/ 3. Edit hugo.toml, setting the \u0026#34;theme\u0026#34; property to the theme name. 4. Create new content with the command \u0026#34;hugo new content \u0026lt;SECTIONNAME\u0026gt;/\u0026lt;FILENAME\u0026gt;.\u0026lt;FORMAT\u0026gt;\u0026#34;. 5. Start the embedded web server with the command \u0026#34;hugo server --buildDrafts\u0026#34;. See documentation at https://gohugo.io/. This is an example of the files hugo new site creates:\n1 2 3 4 5 6 7 8 9 10 11 your-site-name/ ├── themes ├── static ├── layouts ├── i18n ├── hugo.toml ├── data ├── content ├── assets └── archetypes └── default.md Since this blog post is not meant to be an in-depth tutorial of how to build a website with Hugo, we will not go into detail on every single file and folder this command creates, but some important things to know are:\nThe themes/ directory is where you store themes added as Git submodules. This guide assumes you are using Hugo modules to install themes, instead of the old Git submodule way, so you will not need to interact with the themes/ directory. This is also where you would store a custom theme, if you wanted to create your own Hugo theme for your site. The static/ directory is where you would store static assets for your site, including images and a favicon.ico for the site. Although counter-intuitive, it is generally considered best practice to include the binaries for your static resources in the Git repository. Save your favicon.ico to static/favicon.ico (if you have one), and any images you use in your posts in static/img (this directory doesn\u0026rsquo;t exist by default, you have to create it). The layouts/ directory is where you can create Hugo templates for finer-grained control of how content is displayed on your site. The hugo.toml file is the main configuration file for your site. If you prefer YAML, you can copy the contents of hugo.toml into convertsimple.com, delete or rename hugo.toml to hugo.yaml/hugo.yml, and paste the converted configuration into the YAML file. Hugo will detect a file named hugo.yml or hugo.toml wherever you run hugo commands from. This guide assumes you are using YAML for your configuration.\nTip\nYou can initialize Hugo with a YAML config file instead of TOML by running the hugo new site command with a --format yaml flag:\n1 hugo new site site-name --format yaml Convert Site to Hugo Module Next, initialize your site as a Hugo module:\n1 hugo mod init github.com/username/your-site-name After running this, you will see a go.mod file. This allows Go to mannage your site so you can install themes like they are Go packages. For example, to install the PaperMod theme by editing your hugo.yml file and adding the following block of code:\n1 2 3 module: imports: - path: github.com/adityatelange/hugo-PaperMod The full hugo.yml should now look like this:\n1 2 3 4 5 6 7 baseURL: \u0026#39;https://example.org/\u0026#39; languageCode: en-us title: My New Hugo Site module: imports: - path: github.com/adityatelange/hugo-PaperMod Note\nRun hugo mod tidy; this will download the theme(s)/module(s) you declare, remove old versions, and update your go.mod file for you.\nRun Local Hugo Development Server Now you can test running the server with hugo serve, which will compile the site and start serving it at http://localhost:1313/ by default. To change the host address, i.e. to access it from another machine on the network, use --bind 0.0.0.0, and to change the port use -p \u0026lt;port\u0026gt;. This is Hugo\u0026rsquo;s development server. As you edit files, the server will \u0026lsquo;hot reload,\u0026rsquo; re-compiling the Markdown you write and restarting the server.\nHugo does this very quickly. Each page takes mere milliseconds to render, even those with images or a lot of text, and it caches between rebuilds, only re-rendering the new content. This leads to a pleasant \u0026ldquo;change something and see it instantly\u0026rdquo; writing experience.\nIf you start the server with -D, Hugo will also render your drafts in the development server.\nGit Repository Setup Run git init -b main in your Hugo site\u0026rsquo;s directory to initialize a new Git repository. Before committing any code, add a .gitignore that ignores Hugo\u0026rsquo;s public/ and resources/ directories that it creates when you run the development server:\n1 2 /public/ /resources/ Then, do your initial commit:\n1 2 git add * git commit -m \u0026#34;Initial commit\u0026#34; Create a repository on Github for your Hugo site. This should match the URL you used when you create the Hugo module with hugo mod init github.com/user/your-site-name. Add the remote to your local repository:\n1 git remote set origin git@github.com:username/your-site-name.git And push your code with git push -u origin main.\nNetlify Setup Create an account on Netlify. During the setup process, you will be asked to create a project. Allow Netlify to integrate with your Github and find the repository with your Hugo site. If you already have a Netlify site, add a new project and use \u0026ldquo;Import an existing project\u0026rdquo; and find your Hugo repository.\nWhen you are prompted to input build settings like the base directory/package directory, the build command, the publish directory, etc, leave all of these blank. You can optionally leave the functions directory as netlify/functions. If you set values here, the site will fail to build because the hugo.yml interferes with these settings. Do your site configuration in hugo.yml, not Netlify.\nWhen asked which branch to trigger Netlify deploys on, you have a decision to make: do you want your site to deploy every single time you open a PR to the main branch, including times where you are doing small cleanup chores like updating the .gitignore, or setting up a new pipeline? Or do you want to have more control over deploys, i.e. only when merging into a branch named netlify?\nI chose the latter, and created a netlify branch, then configured Netlify to deploy from the netlify branch instead of main. I also turned off deployment previews, so any PR into netlify will trigger a deploy.\nnetlify.toml Config After finishing the setup, create a netlify.toml file in the root of your Hugo repository :\nNote\nIf you have a domain name, you can set it in HUGO_BASEURL instead of the Netlify app URL. Also, make sure to check the current versions of Hugo and Node. for NPM versions, just put the major version number, i.e. 24, 25, etc.\n1 2 3 4 5 6 7 8 9 10 [build.environment] HUGO_BASEURL = \u0026#34;https://netlify-project-name.netlify.app\u0026#34; HUGO_VERSION = \u0026#34;0.152.2\u0026#34; HUGO_ENV = \u0026#34;production\u0026#34; NODE_VERSION = \u0026#34;24\u0026#34; HUGO_ENABLEGITINFO = \u0026#34;true\u0026#34; [build] command = \u0026#34;hugo --gc --minify\u0026#34; publish = \u0026#34;public\u0026#34; This file tells Netlify how to build your Hugo site. Commit it to git with git add * \u0026amp;\u0026amp; git commit -m \u0026quot;Add netlify config\u0026quot; and push to main with git push. Even better, create a new branch before adding/committing your code, i.e. git switch -c feat/netlify-setup, then add the files and commit message. When you push, use git push -u origin feat/netlify-setup. Merge the branch into the main branch in Github.\nExample Production Hugo Dockerfile If you plan to host your Hugo site yourself, you can set up a Dockerfile to build your site and serve it behind a proxy like Caddy or NGINX.\nYou can use a multi-stage Docker build to have a smaller final image that only has your rendered HTML and the Caddy server to serve it:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 FROM hugomods/hugo:exts AS builder WORKDIR /src ## Copy Hugo site files \u0026amp; config COPY archetypes/ archetypes/ COPY assets/ assets/ COPY content/ content/ COPY layouts/ layouts/ COPY static/ static/ COPY hugo.yml go.mod go.sum .hugo_build.lock ./ ARG HUGO_BASEURL=http://localhost/ RUN hugo \\ --minify \\ --gc \\ --baseURL=\u0026#34;${HUGO_BASEURL}\u0026#34; \\ --destination /output/public FROM caddy:alpine COPY --from=builder /output/public /usr/share/caddy COPY ./Caddyfile /etc/caddy/Caddyfile EXPOSE 80 443 CMD [\u0026#34;caddy\u0026#34;, \u0026#34;run\u0026#34;, \u0026#34;--config\u0026#34;, \u0026#34;/etc/caddy/Caddyfile\u0026#34;] Create a Caddyfile the container will use to configure the Caddy server:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 { # debug email {$CADDY_EMAIL} } {$CADDY_SITE_ADDRESS} { root * /usr/share/caddy file_server encode gzip header { X-Content-Type-Options nosniff X-Frame-Options DENY } } When you build the container, you will need to set environment variables for CADDY_EMAIL (for automated LetsEncrypt SSL certificates) and CADDY_SITE_ADDRESS (for handling connections coming to the Caddy URL). The 2 env vars are \u0026ldquo;build arguments\u0026rdquo;, which you can inject in your docker build command using --build-arg ARG_NAME=value. For example, to build this Dockerfile:\n1 docker build --build-arg CADDY_EMAIL=\u0026#34;youremail@address.com\u0026#34; --build-arg CADDY_SITE_ADDRESS=\u0026#34;myblog.com\u0026#34; . Check Links with Lychee Lychee is a fast link checker you can use to check your site for broken links. You can install it locally and point it at your live site, or you can run it against the public/ directory after Hugo builds to check your links before deploying.\nLychee\u0026rsquo;s syntax is simple:\n1 2 3 4 5 ## Check links on your live site lychee https://your-site-name.com ## Check links in the public/ directory after a Hugo build lychee public/ As a Github action:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 --- name: \u0026#34;Test Blog Links\u0026#34; on: ## Allow manual runs workflow_dispatch: ## Every 6 hours schedule: - cron: \u0026#34;0 */6 * * *\u0026#34; permissions: contents: read jobs: test: runs-on: ubuntu-latest concurrency: group: ${{ github.workflow }}-${{ github.ref }} steps: - name: Test live site links uses: lycheeverse/lychee-action@v1 with: args: \u0026gt;- --base-verification false --no-progress \u0026#34;${{ vars.HUGO_BASEURL }}\u0026#34;/* Or in a full pipeline that builds the site and then tests the public/ directory (this is useful to do before deploying):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 --- name: \u0026#34;PR checks\u0026#34; on: pull_request: branches: [netlify] types: [opened, synchronize, reopened] permissions: contents: read pull-requests: write env: HUGO_VERSION: \u0026#34;0.154.3\u0026#34; jobs: test: name: Build \u0026amp; test Hugo site runs-on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@v4 with: fetch-depth: 0 - name: Vale prose linting uses: errata-ai/vale-action@v2.1.1 with: files: \u0026#39;[\u0026#34;content/**.{md}\u0026#34;]\u0026#39; - name: Setup Hugo uses: peaceiris/actions-hugo@v3 with: hugo-version: ${{ env.HUGO_VERSION }} extended: true - name: Build site run: hugo --gc --minify - name: Check links with Lychee uses: lycheeverse/lychee-action@v1 with: args: \u0026#34;public/**/*.html --base .\u0026#34; fail: false Closing Building a blog with Hugo is fun, and relatively quick and easy to get up and running. You can build a complex site for your product, or a simple blog you update a couple times a year, all with the same tooling. The minimal amount of configuration you need to get started lends itself to quick development, while still allowing you to build up a more complex configuration over time. Hugo modules make it even easier to install themes and site extensions, and the ability to host the site anywhere that can serve static web files gives you a ton of flexibility to where you put the site online.\nThis guide did not go in-depth on configuring and customizing Hugo, nor did it walk through creating content for the site. The Hugo quickstart guide will do a better job of walking you through building your first blog, and I highly recommend keeping this site open and using the search bar at the top as you\u0026rsquo;re learning to find new ways of using Hugo.\n","permalink":"https://techobyte.cc/posts/host-hugo-with-netlify/","summary":"\u003cp\u003e\u003ca href=\"https://gohugo.com\"\u003eHugo\u003c/a\u003e is a \u003ca href=\"https://www.cloudflare.com/learning/performance/static-site-generator/\"\u003estatic site generator\u003c/a\u003e that enables you to write your website\u0026rsquo;s content as Markdown files, and render them to nice-looking websites using \u003ca href=\"https://themes.gohugo.io\"\u003eHugo themes\u003c/a\u003e. The word \u0026ldquo;static\u0026rdquo; in this context means that the files Hugo renders are meant to be served as-is, there is no \u0026ldquo;backend\u0026rdquo; for the site (unless you add custom Javascript code).\u003c/p\u003e\n\u003cp\u003eStatic sites are perfect for many different kinds of websites, from personal blogs like this site to product sites (i.e. \u003ca href=\"https://brave.com\"\u003eBrave browser\u0026rsquo;s website\u003c/a\u003e) to an organization\u0026rsquo;s home page (i.e. \u003ca href=\"https://letsencrypt.org\"\u003ethe LetsEncrypt project\u0026rsquo;s site\u003c/a\u003e) to documentation sites (i.e. \u003ca href=\"https://docs.digitalocean.com\"\u003eDigitalOcean\u0026rsquo;s documentation\u003c/a\u003e). With a static site generator, you do not have to deal with web code like HTML or Javascript, but you still have the option of \u003ca href=\"https://gohugo.io/commands/hugo_new_theme/\"\u003ecreating your own custom themes\u003c/a\u003e if that appeals to you.\u003c/p\u003e","title":"Host Hugo with Netlify"}]