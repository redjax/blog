---
version: "3"

vars:
  HUGO_BASEURL: '{{default "http://localhost:1313/" .HUGO_BASEURL}}'

tasks:
  check-public:
    desc: "Run lychee on rendered files in public/ directory"
    cmds:
      - >
        lychee
        public/**/*.html
        --base-url https://techobyte.cc
        --exclude-all-private

  check-live:
    desc: "Run lychee on the live site"
    cmds:
      - >
        lychee
        "{{.HUGO_BASEURL}}"
        --exclude-all-private
