# yaml-language-server: $schema=https://taskfile.dev/schema.json
---
version: "3"

tasks:
  build-prod:
    desc: Build Production container
    dir: .containers/prod
    cmds:
      - cmd: docker compose build --no-cache

  start-prod:
    desc: Start Production containers
    dir: .containers/prod
    cmds:
      - cmd: docker compose up -d

  stop-prod:
    desc: Stop running Production containers
    dir: .containers/prod
    cmds:
      - cmd: docker compose down

  start-dev:
    desc: Start dev container
    dir: .containers/dev
    cmds:
      - cmd: docker compose up -d

  stop-dev:
    desc: Stop dev containers
    dir: .containers/dev
    cmds:
      - cmd: docker compose down

  restart-dev:
    desc: Start dev containers with --force-recreate
    dir: .containers/dev
    cmds:
      - cmd: docker compose up -d --force-recreate

  reset-dev:
    desc: Hard reset environment by bringing it down before restarting
    dir: .containers/dev
    cmds:
      - cmd: |
          docker compose down && docker compose up -d --force-recreate
